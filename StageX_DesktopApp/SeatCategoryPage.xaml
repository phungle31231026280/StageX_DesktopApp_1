<Page x:Class="StageX_DesktopApp.SeatCategoryPage"
      xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
      Title="Quản lý Hạng ghế"
      Background="#FF1A1A1A" Foreground="White"
      Loaded="Page_Loaded">

    <Page.Resources>
        <Style x:Key="ButtonAddStyle" TargetType="Button">
            <Setter Property="Background" Value="#FF198754"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="Padding" Value="10,5"/>
            <Setter Property="FontWeight" Value="Bold"/>
        </Style>
        <Style x:Key="ButtonEditStyle" TargetType="Button">
            <Setter Property="Background" Value="#FF0D6EFD"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="Padding" Value="8,3"/>
            <Setter Property="Margin" Value="0,0,5,0"/>
        </Style>
        <Style x:Key="ButtonDeleteStyle" TargetType="Button">
            <Setter Property="Background" Value="#FFDC3545"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="Padding" Value="8,3"/>
        </Style>
        <Style x:Key="ButtonSaveStyle" TargetType="Button" BasedOn="{StaticResource ButtonEditStyle}">
            <Setter Property="Padding" Value="10,5"/>
        </Style>
        <Style x:Key="ButtonCancelStyle" TargetType="Button">
            <Setter Property="Background" Value="#FF6C757D"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="Padding" Value="10,5"/>
        </Style>
    </Page.Resources>

    <ScrollViewer VerticalScrollBarVisibility="Auto">
        <StackPanel Margin="25">
            <TextBlock Text="Quản lý Rạp, Ghế &amp; Hạng ghế" FontSize="24" FontWeight="Bold" Margin="0,0,0,15"/>

            <TextBlock Text="Thêm hạng ghế mới" FontSize="18" FontWeight="SemiBold" Margin="0,10,0,5"/>
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>

                <TextBox x:Name="AddCategoryNameTextBox" Grid.Column="0" 
                         Text="Tên hạng (ví dụ: VIP 2)" Padding="8" FontSize="14" Margin="0,0,10,0"
                         Foreground="Gray"
                         GotFocus="TextBox_GotFocus" 
                         LostFocus="AddCategoryNameTextBox_LostFocus"/>

                <TextBox x:Name="AddCategoryPriceTextBox" Grid.Column="1" 
                         Text="Giá phụ thu (ví dụ: 50000)" Padding="8" FontSize="14" Margin="0,0,10,0"
                         Foreground="Gray"
                         GotFocus="TextBox_GotFocus" 
                         LostFocus="AddCategoryPriceTextBox_LostFocus"/>

                <Button x:Name="AddCategoryButton" Grid.Column="2" Content="Thêm" Style="{StaticResource ButtonAddStyle}" Click="AddCategoryButton_Click"/>
            </Grid>

            <StackPanel x:Name="EditCategoryPanel" Margin="0,20,0,0" Visibility="Collapsed">
                <TextBlock Text="Chỉnh sửa hạng ghế" FontSize="18" FontWeight="SemiBold" Margin="0,10,0,5"/>
                <TextBox x:Name="EditCategoryIdTextBox" Visibility="Collapsed"/>

                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="Auto"/>
                    </Grid.ColumnDefinitions>

                    <TextBox x:Name="EditCategoryNameTextBox" Grid.Column="0" Padding="8" FontSize="14" Margin="0,0,10,0"/>
                    <TextBox x:Name="EditCategoryPriceTextBox" Grid.Column="1" Padding="8" FontSize="14" Margin="0,0,10,0"/>
                    <Button x:Name="SaveCategoryButton" Grid.Column="2" Content="Lưu" Style="{StaticResource ButtonSaveStyle}" Margin="0,0,5,0" Click="SaveCategoryButton_Click"/>
                    <Button x:Name="CancelEditButton" Grid.Column="3" Content="Hủy" Style="{StaticResource ButtonCancelStyle}" Click="CancelEditButton_Click"/>
                </Grid>
            </StackPanel>

            <TextBlock Text="Danh sách hạng ghế" FontSize="18" FontWeight="SemiBold" Margin="0,30,0,10"/>
            <DataGrid x:Name="CategoriesGrid"
                      IsReadOnly="True"
                      AutoGenerateColumns="False"
                      CanUserAddRows="False"
                      LoadingRow="CategoriesGrid_LoadingRow"
                      HeadersVisibility="Column, Row"
                       Background="Transparent" RowBackground="Transparent" Foreground="White" BorderThickness="0"
      GridLinesVisibility="Horizontal" HorizontalGridLinesBrush="#333"
    RowHeaderWidth="0">
                <DataGrid.Resources>
                    <Style TargetType="DataGridColumnHeader">
                        <Setter Property="Background" Value="Black"/>
                        <Setter Property="Foreground" Value="White"/>
                        <Setter Property="Padding" Value="10,8"/>
                        <Setter Property="FontSize" Value="14"/>
                        <Setter Property="FontWeight" Value="Bold"/>
                    </Style>
                </DataGrid.Resources>
                <DataGrid.Columns>
                    <DataGridTextColumn Header="ID" Binding="{Binding CategoryId}" Width="50" Visibility="Collapsed"/>
                    <DataGridTextColumn Header="Tên Hạng Ghế" Binding="{Binding CategoryName}" Width="*"/>
                    <DataGridTextColumn Header="Giá Phụ Thu (VNĐ)" Binding="{Binding BasePrice, StringFormat='N0'}" Width="*"/>

                    <DataGridTemplateColumn Header="Hành động" Width="Auto">
                       
                        <DataGridTemplateColumn.CellTemplate>
                            <DataTemplate>
                                <StackPanel Orientation="Horizontal">
                                    <Button x:Name="EditButton" Content="Chỉnh sửa" Style="{StaticResource ButtonEditStyle}" Click="EditButton_Click"/>
                                    <Button x:Name="DeleteButton" Content="Xóa" Style="{StaticResource ButtonDeleteStyle}" Click="DeleteButton_Click"/>
                                </StackPanel>
                            </DataTemplate>
                        </DataGridTemplateColumn.CellTemplate>
                    </DataGridTemplateColumn>

                </DataGrid.Columns>
            </DataGrid>

        </StackPanel>
    </ScrollViewer>
</Page>