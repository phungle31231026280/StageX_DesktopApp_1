<Page x:Class="StageX_DesktopApp.AccountPage"
      xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
      Title="Quản lý Tài khoản"
      Background="#FF1A1A1A" Foreground="White"
      Loaded="Page_Loaded">

    <Page.Resources>
        <Style x:Key="ButtonAddStyle" TargetType="Button">
            <Setter Property="Background" Value="#FF198754"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="Padding" Value="10,5"/>
            <Setter Property="FontWeight" Value="Bold"/>
        </Style>
        <Style x:Key="ButtonEditStyle" TargetType="Button">
            <Setter Property="Background" Value="#FF0D6EFD"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="Padding" Value="8,3"/>
            <Setter Property="Margin" Value="0,0,5,0"/>
        </Style>
        <Style x:Key="ButtonDeleteStyle" TargetType="Button">
            <Setter Property="Background" Value="#FFDC3545"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="Padding" Value="8,3"/>
        </Style>
    </Page.Resources>

    <Grid Margin="25">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <TextBlock Grid.Row="0" Text="Quản lý tài khoản" FontSize="24" FontWeight="Bold" Margin="0,0,0,15"/>

        <Border Grid.Row="1" Background="#FF0C1220" CornerRadius="5" Padding="15" Margin="0,0,0,10">
            <StackPanel>
                <TextBlock x:Name="FormTitle" Text="Thêm tài khoản mới" FontSize="18" FontWeight="SemiBold" Margin="0,0,0,10" Foreground="#FFffc107"/>
                <TextBox x:Name="UserIdTextBox" Visibility="Collapsed"/>

                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>

                    <StackPanel Grid.Column="0" Margin="0,0,10,0">
                        <TextBlock Text="Tên tài khoản:" Margin="0,5,0,5" Foreground="Gray"/>
                        <TextBox x:Name="AccountNameTextBox" Padding="8" FontSize="14"/>
                    </StackPanel>
                    <StackPanel Grid.Column="1" Margin="5,0,5,0">
                        <TextBlock Text="Email:" Margin="0,5,0,5" Foreground="Gray"/>
                        <TextBox x:Name="EmailTextBox" Padding="8" FontSize="14"/>
                    </StackPanel>
                    <StackPanel Grid.Column="2" Margin="10,0,0,0">
                        <TextBlock Text="Mật khẩu:" Margin="0,5,0,5" Foreground="Gray"/>
                        <PasswordBox x:Name="PasswordBox" Padding="8" FontSize="14"/>
                        <TextBlock Text="(Để trống nếu không muốn đổi khi Sửa)" FontSize="10" Foreground="Gray"/>
                    </StackPanel>
                </Grid>

                <Grid Margin="0,10,0,0">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>

                    <StackPanel Grid.Column="0" Margin="0,0,10,0">
                        <TextBlock Text="Vai trò:" Margin="0,5,0,5" Foreground="Gray"/>
                        <ComboBox x:Name="RoleComboBox" Padding="8">
                            <ComboBoxItem Content="Nhân viên"/>
                            <ComboBoxItem Content="Admin"/>
                        </ComboBox>
                    </StackPanel>
                    <StackPanel Grid.Column="1" Margin="5,0,5,0">
                        <TextBlock Text="Trạng thái:" Margin="0,5,0,5" Foreground="Gray"/>
                        <ComboBox x:Name="StatusComboBox" Padding="8">
                            <ComboBoxItem Content="hoạt động"/>
                            <ComboBoxItem Content="khóa"/>
                        </ComboBox>
                    </StackPanel>
                    <StackPanel Grid.Column="2" Orientation="Horizontal" VerticalAlignment="Bottom" HorizontalAlignment="Right">
                        <Button x:Name="SaveButton" Content="Thêm tài khoản" Style="{StaticResource ButtonAddStyle}" Click="SaveButton_Click"/>
                        <Button x:Name="ClearButton" Content="Hủy" Margin="10,0,0,0" Padding="10,5" Click="ClearButton_Click" Visibility="Collapsed"/>
                    </StackPanel>
                </Grid>
            </StackPanel>
        </Border>

        <TextBlock Grid.Row="2" Text="Danh sách tài khoản" FontSize="18" FontWeight="SemiBold" Margin="0,20,0,10"/>

        <DataGrid Grid.Row="3"
                  x:Name="AccountsGrid"
                  IsReadOnly="True" AutoGenerateColumns="False" CanUserAddRows="False"
                  LoadingRow="AccountsGrid_LoadingRow" HeadersVisibility="Column, Row"
                  SelectionChanged="AccountsGrid_SelectionChanged"
                  Background="Transparent" RowBackground="Transparent" Foreground="White" BorderThickness="0"
                  GridLinesVisibility="Horizontal" HorizontalGridLinesBrush="#333"
                  RowHeaderWidth="0">
            <DataGrid.Resources>
                <Style TargetType="DataGridColumnHeader">
                    <Setter Property="Background" Value="Black"/>
                    <Setter Property="Foreground" Value="White"/>
                    <Setter Property="Padding" Value="10,8"/>
                    <Setter Property="FontSize" Value="14"/>
                    <Setter Property="FontWeight" Value="Bold"/>
                </Style>
            </DataGrid.Resources>
            <DataGrid.Columns>
                <DataGridTextColumn Header="ID" Binding="{Binding UserId}" Width="50" Visibility="Collapsed"/>
                <DataGridTextColumn Header="Tên tài khoản" Binding="{Binding AccountName}" Width="*"/>
                <DataGridTextColumn Header="Email" Binding="{Binding Email}" Width="2*"/>
                <DataGridTextColumn Header="Vai trò" Binding="{Binding Role}" Width="*"/>
                <DataGridTextColumn Header="Trạng thái" Binding="{Binding Status}" Width="*"/>

                <DataGridTemplateColumn Header="Hành động" Width="Auto">
                    <DataGridTemplateColumn.CellTemplate>
                        <DataTemplate>
                            <StackPanel Orientation="Horizontal">
                                <Button x:Name="EditButton" Content="Cập nhật" Style="{StaticResource ButtonEditStyle}" Click="EditButton_Click"/>
                                <Button x:Name="DeleteButton" Content="Xóa" Style="{StaticResource ButtonDeleteStyle}" Click="DeleteButton_Click"/>
                            </StackPanel>
                        </DataTemplate>
                    </DataGridTemplateColumn.CellTemplate>
                </DataGridTemplateColumn>
            </DataGrid.Columns>
        </DataGrid>
    </Grid>
</Page>